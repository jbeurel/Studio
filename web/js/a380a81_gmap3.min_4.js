(function(ab){function N(){var a=[];this.empty=function(){for(var b=0;b<a.length;b++){if(a[b]){return false}}return true};this.add=function(b){a.push(b)};this.addNext=function(d){var b=[],c,e=0;for(c=0;c<a.length;c++){if(!a[c]){continue}if(e==1){b.push(d)}b.push(a[c]);e++}if(e<2){b.push(d)}a=b};this.get=function(){for(var b=0;b<a.length;b++){if(a[b]){return a[b]}}return false};this.ack=function(){for(var b=0;b<a.length;b++){if(a[b]){delete a[b];break}}if(this.empty()){a=[]}}}function Q(){var a={};this.add=function(c,b,d){c=c.toLowerCase();if(!a[c]){a[c]=[]}a[c].push({obj:b,tag:J(d,"tag")});return c+"-"+(a[c].length-1)};this.get=function(e,c,f){var d,g,b;e=e.toLowerCase();if(!a[e]||!a[e].length){return null}g=c?a[e].length:-1;b=c?-1:1;for(d=0;d<a[e].length;d++){g+=b;if(a[e][g]){if(f!==undefined){if((a[e][g].tag===undefined)||(ab.inArray(a[e][g].tag,f)<0)){continue}}return a[e][g].obj}}return null};this.all=function(c,d){var b,e=[];c=c.toLowerCase();if(!a[c]||!a[c].length){return e}for(b=0;b<a[c].length;b++){if(!a[c][b]){continue}if((d!==undefined)&&((a[c][b].tag===undefined)||(ab.inArray(a[c][b].tag,d)<0))){continue}e.push(a[c][b].obj)}return e};this.names=function(){var b,c=[];for(b in a){c.push(b)}return c};this.refToObj=function(b){b=b.split("-");if((b.length==2)&&a[b[0]]&&a[b[0]][b[1]]){return a[b[0]][b[1]].obj}return null};this.rm=function(d,f,e){var g,b,c;d=d.toLowerCase();if(!a[d]){return false}if(f!==undefined){if(e){for(g=a[d].length-1;g>=0;g--){if((a[d][g]!==undefined)&&(a[d][g].tag!==undefined)&&(ab.inArray(a[d][g].tag,f)>=0)){break}}}else{for(g=0;g<a[d].length;g++){if((a[d][g]!==undefined)&&(a[d][g].tag!==undefined)&&(ab.inArray(a[d][g].tag,f)>=0)){break}}}}else{g=e?a[d].length-1:0}if(!(g in a[d])){return false}if(typeof(a[d][g].obj.setMap)==="function"){a[d][g].obj.setMap(null)}if(typeof(a[d][g].obj.remove)==="function"){a[d][g].obj.remove()}if(typeof(a[d][g].obj.free)==="function"){a[d][g].obj.free()}delete a[d][g].obj;if(f!==undefined){c=[];for(b=0;b<a[d].length;b++){if(b!==g){c.push(a[d][b])}}a[d]=c}else{if(e){a[d].pop()}else{a[d].shift()}}return true};this.clear=function(c,d,b,h){var g,e,f;if(!c||!c.length){c=[];for(g in a){c.push(g)}}else{c=X(c)}for(e=0;e<c.length;e++){if(c[e]){f=c[e].toLowerCase();if(!a[f]){continue}if(d){this.rm(f,h,true)}else{if(b){this.rm(f,h,false)}else{while(this.rm(f,h,false)){}}}}}}}function D(){var b=[],e=[],d=[],f=[],c=false,a;this.events=function(){for(var g=0;g<arguments.length;g++){e.push(arguments[g])}};this.startRedraw=function(){if(!c){c=true;return true}return false};this.endRedraw=function(){c=false};this.redraw=function(){var h,i=[],g=this;for(h=0;h<arguments.length;h++){i.push(arguments[h])}if(this.startRedraw){a.apply(g,i);this.endRedraw()}else{setTimeout(function(){g.redraw.apply(g,i)},50)}};this.setRedraw=function(g){a=g};this.store=function(i,h,g){d.push({data:i,obj:h,shadow:g})};this.free=function(){for(var g=0;g<e.length;g++){google.maps.event.removeListener(e[g])}e=[];this.freeAll()};this.freeIndex=function(g){if(typeof(d[g].obj.setMap)==="function"){d[g].obj.setMap(null)}if(typeof(d[g].obj.remove)==="function"){d[g].obj.remove()}if(d[g].shadow){if(typeof(d[g].shadow.remove)==="function"){d[g].obj.remove()}if(typeof(d[g].shadow.setMap)==="function"){d[g].shadow.setMap(null)}delete d[g].shadow}delete d[g].obj;delete d[g].data;delete d[g]};this.freeAll=function(){var g;for(g=0;g<d.length;g++){if(d[g]){this.freeIndex(g)}}d=[]};this.freeDiff=function(l){var g,h,j={},i=[];for(g=0;g<l.length;g++){i.push(l[g].idx.join("-"))}for(g=0;g<d.length;g++){if(!d[g]){continue}h=ab.inArray(d[g].data.idx.join("-"),i);if(h>=0){j[h]=true}else{this.freeIndex(g)}}return j};this.add=function(g,h){b.push({latLng:g,marker:h})};this.get=function(g){return b[g]};this.clusters=function(B,v,j,w){var u=B.getProjection(),h=u.fromLatLngToPoint(new google.maps.LatLng(B.getBounds().getNorthEast().lat(),B.getBounds().getSouthWest().lng())),aj,ak,x,i,m,n,an,p,o=B.getZoom(),s={},C={},al={},q=[],ai,ah,t,z,l,am,r=B.getBounds(),g=j&&(j<=B.getZoom()),A=B.getZoom()>2;am=0;l={};for(aj=0;aj<b.length;aj++){if(A&&!r.contains(b[aj].latLng)){continue}i=u.fromLatLngToPoint(b[aj].latLng);s[aj]=[Math.floor((i.x-h.x)*Math.pow(2,o)),Math.floor((i.y-h.y)*Math.pow(2,o))];l[aj]=true;am++}if(!w&&!g){for(an=0;an<f.length;an++){if(an in l){am--}else{break}}if(!am){return false}}f=l;l=[];for(aj in s){m=s[aj][0];n=s[aj][1];if(!(m in C)){C[m]={}}if(!(n in C[m])){C[m][n]=aj;al[aj]={};l.push(aj)}al[C[m][n]][aj]=true}v=Math.pow(v,2);delete (C);an=0;while(1){while((an<l.length)&&!(l[an] in al)){an++}if(an==l.length){break}aj=l[an];t=s[aj][0];z=s[aj][1];C=null;if(g){C={lat:t,lng:z,idx:[aj]}}else{do{ai={lat:0,lng:0,idx:[]};for(p=an;p<l.length;p++){if(!(l[p] in al)){continue}ak=l[p];if(Math.pow(t-s[ak][0],2)+Math.pow(z-s[ak][1],2)<=v){for(x in al[ak]){ai.lat+=b[x].latLng.lat();ai.lng+=b[x].latLng.lng();ai.idx.push(x)}}}ai.lat/=ai.idx.length;ai.lng/=ai.idx.length;if(!C){ah=ai.idx.length>1;C=ai}else{ah=ai.idx.length>C.idx.length;if(ah){C=ai}}if(ah){i=u.fromLatLngToPoint(new google.maps.LatLng(C.lat,C.lng));t=Math.floor((i.x-h.x)*Math.pow(2,o));z=Math.floor((i.y-h.y)*Math.pow(2,o))}}while(ah)}for(p=0;p<C.idx.length;p++){if(C.idx[p] in al){delete (al[C.idx[p]])}}q.push(C)}return q};this.getBounds=function(){var h,g=new google.maps.LatLngBounds();for(h=0;h<b.length;h++){g.extend(b[h].latLng)}return g}}var Z={verbose:false,queryLimit:{attempt:5,delay:250,random:250},init:{mapTypeId:google.maps.MapTypeId.ROADMAP,center:[46.578498,2.457275],zoom:2},classes:{Map:google.maps.Map,Marker:google.maps.Marker,InfoWindow:google.maps.InfoWindow,Circle:google.maps.Circle,Rectangle:google.maps.Rectangle,OverlayView:google.maps.OverlayView,StreetViewPanorama:google.maps.StreetViewPanorama,KmlLayer:google.maps.KmlLayer,TrafficLayer:google.maps.TrafficLayer,BicyclingLayer:google.maps.BicyclingLayer,GroundOverlay:google.maps.GroundOverlay,StyledMapType:google.maps.StyledMapType}},G=["events","onces","options","apply","callback","data","tag"],V=["init","geolatlng","getlatlng","getroute","getelevation","getdistance","addstyledmap","setdefault","destroy"],P=["get"],S=directionsService=elevationService=maxZoomService=distanceMatrixService=null;function M(a){for(var b in a){if(typeof(Z[b])==="object"){Z[b]=ab.extend({},Z[b],a[b])}else{Z[b]=a[b]}}}function H(a){if(!a){return true}for(var b=0;b<V.length;b++){if(V[b]===a){return false}}return true}function R(c){var a=J(c,"action");for(var b=0;b<P.length;b++){if(P[b]===a){return true}}return false}function I(b,a){if(a.toLowerCase){a=a.toLowerCase();for(var c in b){if(c.toLowerCase&&(c.toLowerCase()==a)){return c}}}return false}function J(c,b,a){var d=I(c,b);return d?c[d]:a}function L(c,b){var a,d;if(!c||!b){return false}b=X(b);for(a in c){if(a.toLowerCase){a=a.toLowerCase();for(d in b){if(a==b[d]){return true}}}}return false}function W(c,d,e){if(L(c,G)||L(c,d)){var a,b;for(a=0;a<G.length;a++){b=I(c,G[a]);e[G[a]]=b?c[b]:{}}if(d&&d.length){for(a=0;a<d.length;a++){if(b=I(c,d[a])){e[d[a]]=c[b]}}}return e}else{e.options={};for(b in c){if(b!=="action"){e.options[b]=c[b]}}return e}}function O(d,f,g,e){var a=I(f,d),c,h={},b=["map"];h.callback=J(f,"callback");g=X(g);e=X(e);if(a){return W(f[a],g,h)}if(e&&e.length){for(c=0;c<e.length;c++){b.push(e[c])}}if(!L(f,b)){h=W(f,g,h)}for(c=0;c<G.length;c++){if(G[c] in h){continue}h[G[c]]={}}return h}function T(){if(!S){S=new google.maps.Geocoder()}return S}function ad(){if(!directionsService){directionsService=new google.maps.DirectionsService()}return directionsService}function K(){if(!elevationService){elevationService=new google.maps.ElevationService()}return elevationService}function E(){if(!maxZoomService){maxZoomService=new google.maps.MaxZoomService()}return maxZoomService}function ac(){if(!distanceMatrixService){distanceMatrixService=new google.maps.DistanceMatrixService()}return distanceMatrixService}function aa(a){return(typeof(a)==="number"||typeof(a)==="string")&&a!==""&&!isNaN(a)}function X(a){var b,c=[];if(a!==undefined){if(typeof(a)==="object"){if(typeof(a.length)==="number"){c=a}else{for(b in a){c.push(a[b])}}}else{c.push(a)}}return c}function Y(c,a,d){var b=a?c:null;if(!c||(typeof(c)==="string")){return b}if(c.latLng){return Y(c.latLng)}if(typeof(c.lat)==="function"){return c}else{if(aa(c.lat)){return new google.maps.LatLng(c.lat,c.lng)}else{if(!d&&c.length){if(!aa(c[0])||!aa(c[1])){return b}return new google.maps.LatLng(c[0],c[1])}}}return b}function U(e,d,a){var b,f,c;if(!e){return null}c=a?e:null;if(typeof(e.getCenter)==="function"){return e}if(e.length){if(e.length==2){b=Y(e[0]);f=Y(e[1])}else{if(e.length==4){b=Y([e[0],e[1]]);f=Y([e[2],e[3]])}}}else{if(("ne" in e)&&("sw" in e)){b=Y(e.ne);f=Y(e.sw)}else{if(("n" in e)&&("e" in e)&&("s" in e)&&("w" in e)){b=Y([e.n,e.e]);f=Y([e.s,e.w])}}}if(b&&f){return new google.maps.LatLngBounds(f,b)}return c}function F(a){var f=new N(),d=new Q(),b=null,c={},e=false;this._plan=function(g){for(var h=0;h<g.length;h++){f.add(g[h])}this._run()};this._planNext=function(g){f.addNext(g)};this._direct=function(h){var g=J(h,"action");return this[g](ab.extend({},g in Z?Z[g]:{},h.args?h.args:h))};this._end=function(){e=false;f.ack();this._run()},this._run=function(){if(e){return}var g=f.get();if(!g){return}e=true;this._proceed(g)};this._proceed=function(i){i=i||{};var l=J(i,"action")||"init",m=l.toLowerCase(),n=true,j=J(i,"target"),g=J(i,"args"),h;if(!b&&H(m)){this.init(ab.extend({},Z.init,i.args&&i.args.map?i.args.map:i.map?i.map:{}),true)}if(!j&&!g&&(m in this)&&(typeof(this[m])==="function")){this[m](ab.extend({},m in Z?Z[m]:{},i.args?i.args:i))}else{if(j&&(typeof(j)==="object")){if(n=(typeof(j[l])==="function")){h=j[l].apply(j,i.args?i.args:[])}}else{if(b){if(n=(typeof(b[l])==="function")){h=b[l].apply(b,i.args?i.args:[])}}}if(!n&&Z.verbose){alert("unknown action : "+l)}this._callback(h,i);this._end()}};this._resolveLatLng=function(i,j,o,g){var h=J(i,"address"),l,n=this,m=typeof(j)==="function"?j:n[j];if(h){if(!g){g=0}if(typeof(h)==="object"){l=h}else{l={address:h}}T().geocode(l,function(p,q){if(q===google.maps.GeocoderStatus.OK){m.apply(n,[i,o?p:p[0].geometry.location])}else{if((q===google.maps.GeocoderStatus.OVER_QUERY_LIMIT)&&(g<Z.queryLimit.attempt)){setTimeout(function(){n._resolveLatLng(i,j,o,g+1)},Z.queryLimit.delay+Math.floor(Math.random()*Z.queryLimit.random))}else{if(Z.verbose){alert("Geocode error : "+q)}m.apply(n,[i,false])}}})}else{m.apply(n,[i,Y(i,false,true)])}};this._resolveAllLatLng=function(i,l,j){var m=this,h=-1,g=function(){do{h++}while((h<i[l].length)&&!("address" in i[l][h]));if(h<i[l].length){(function(n){m._resolveLatLng(n,function(p,o){p.latLng=o;g.apply(m,[])})})(i[l][h])}else{m[j](i)}};g()};this._call=function(){var h,g=arguments[0],i=[];if(!arguments.length||!b||(typeof(b[g])!=="function")){return}for(h=1;h<arguments.length;h++){i.push(arguments[h])}return b[g].apply(b,i)};this._subcall=function(i,g){var h={};if(!i.map){return}if(!g){g=J(i.map,"latlng")}if(!b){if(g){h={center:g}}this.init(ab.extend({},i.map,h),true)}else{if(i.map.center&&g){this._call("setCenter",g)}if(i.map.zoom!==undefined){this._call("setZoom",i.map.zoom)}if(i.map.mapTypeId!==undefined){this._call("setMapTypeId",i.map.mapTypeId)}}};this._attachEvent=function(h,i,j,l,g){google.maps.event["addListener"+(g?"Once":"")](h,i,function(m){j.apply(a,[h,m,l])})};this._attachEvents=function(g,i){var h;if(!i){return}if(i.events){for(h in i.events){if(typeof(i.events[h])==="function"){this._attachEvent(g,h,i.events[h],i.data,false)}}}if(i.onces){for(h in i.onces){if(typeof(i.onces[h])==="function"){this._attachEvent(g,h,i.onces[h],i.data,true)}}}};this._callback=function(h,i){if(typeof(i.callback)==="function"){i.callback.apply(a,[h])}else{if(typeof(i.callback)==="object"){for(var g=0;g<i.callback.length;g++){if(typeof(i.callback[g])==="function"){i.callback[k].apply(a,[h])}}}}};this._manageEnd=function(h,i,g){var j,l;if(h&&(typeof(h)==="object")){this._attachEvents(h,i);if(i.apply&&i.apply.length){for(j=0;j<i.apply.length;j++){l=i.apply[j];if(!l.action||(typeof(h[l.action])!=="function")){continue}if(l.args){h[l.action].apply(h,l.args)}else{h[l.action]()}}}}if(!g){this._callback(h,i);this._end()}};this.destroy=function(h){var g;d.clear();a.empty();for(g in c){delete c[g]}c={};if(b){delete b}this._callback(null,h);this._end()};this.init=function(i,h){var j,g,l;if(b){return this._end()}j=O("map",i);if((typeof(j.options.center)==="boolean")&&j.options.center){return false}l=ab.extend({},Z.init,j.options);if(!l.center){l.center=[Z.init.center.lat,Z.init.center.lng]}l.center=Y(l.center);b=new Z.classes.Map(a.get(0),l);for(g in c){b.mapTypes.set(g,c[g])}this._manageEnd(b,j,h);return true};this.getlatlng=function(g){this._resolveLatLng(g,"_getLatLng",true)},this._getLatLng=function(h,g){this._manageEnd(g,h)},this.getaddress=function(i,g){var m=Y(i,false,true),h=J(i,"address"),l=m?{latLng:m}:(h?(typeof(h)==="string"?{address:h}:h):null),j=J(i,"callback"),n=this;if(!g){g=0}if(l&&typeof(j)==="function"){T().geocode(l,function(o,q){if((q===google.maps.GeocoderStatus.OVER_QUERY_LIMIT)&&(g<Z.queryLimit.attempt)){setTimeout(function(){n.getaddress(i,g+1)},Z.queryLimit.delay+Math.floor(Math.random()*Z.queryLimit.random))}else{var p=q===google.maps.GeocoderStatus.OK?o:false;j.apply(a,[p,q]);if(!p&&Z.verbose){alert("Geocode error : "+q)}n._end()}})}else{this._end()}};this.getroute=function(i){var g=J(i,"callback"),h=this;if((typeof(g)==="function")&&i.options){i.options.origin=Y(i.options.origin,true);i.options.destination=Y(i.options.destination,true);ad().route(i.options,function(j,m){var l=m==google.maps.DirectionsStatus.OK?j:false;g.apply(a,[l,m]);h._end()})}else{this._end()}};this.getelevation=function(o){var l,g,i,n,j=[],h=J(o,"callback"),p=J(o,"latlng"),m=this;if(typeof(h)==="function"){l=function(q,s){var r=s===google.maps.ElevationStatus.OK?q:false;h.apply(a,[r,s]);m._end()};if(p){j.push(Y(p))}else{j=J(o,"locations")||[];if(j){j=X(j);for(n=0;n<j.length;n++){j[n]=Y(j[n])}}}if(j.length){K().getElevationForLocations({locations:j},l)}else{g=J(o,"path");i=J(o,"samples");if(g&&i){for(n=0;n<g.length;n++){j.push(Y(g[n]))}if(j.length){K().getElevationAlongPath({path:j,samples:i},l)}}}}else{this._end()}};this.getdistance=function(i){var h,j=J(i,"callback"),g=this;if((typeof(j)==="function")&&i.options&&i.options.origins&&i.options.destinations){i.options.origins=X(i.options.origins);for(h=0;h<i.options.origins.length;h++){i.options.origins[h]=Y(i.options.origins[h],true)}i.options.destinations=X(i.options.destinations);for(h=0;h<i.options.destinations.length;h++){i.options.destinations[h]=Y(i.options.destinations[h],true)}ac().getDistanceMatrix(i.options,function(l,n){var m=n==google.maps.DistanceMatrixStatus.OK?l:false;j.apply(a,[m,n]);g._end()})}else{this._end()}};this.addmarker=function(g){this._resolveLatLng(g,"_addMarker")};this._addMarker=function(h,m,g){var i,n,j,l=O("marker",h,"to");if(!g){if(!m){this._manageEnd(false,l);return}this._subcall(h,m)}else{if(!m){return}}if(l.to){j=d.refToObj(l.to);i=j&&(typeof(j.add)==="function");if(i){j.add(m,h);if(typeof(j.redraw)==="function"){j.redraw()}}if(!g){this._manageEnd(i,l)}}else{l.options.position=m;l.options.map=b;i=new Z.classes.Marker(l.options);if(L(h,"infowindow")){n=O("infowindow",h.infowindow,"open");if((n.open===undefined)||n.open){n.apply=X(n.apply);n.apply.unshift({action:"open",args:[b,i]})}n.action="addinfowindow";this._planNext(n)}if(!g){d.add("marker",i,l);this._manageEnd(i,l)}}return i};this.addmarkers=function(g){if(J(g,"clusters")){this._resolveAllLatLng(g,"markers","_addclusteredmarkers")}else{this._resolveAllLatLng(g,"markers","_addmarkers")}};this._addmarkers=function(o){var g,q,m,p,j,h={},l,i,n=J(o,"markers");this._subcall(o);if(typeof(n)!=="object"){return this._end()}q=O("marker",o,["to","markers"]);if(q.to){i=d.refToObj(q.to);g=i&&(typeof(i.add)==="function");if(g){for(m=0;m<n.length;m++){if(p=Y(n[m])){i.add(p,n[m])}}if(typeof(i.redraw)==="function"){i.redraw()}}this._manageEnd(g,q)}else{ab.extend(true,h,q.options);h.map=b;g=[];for(m=0;m<n.length;m++){if(p=Y(n[m])){if(n[m].options){l={};ab.extend(true,l,h,n[m].options);q.options=l}else{q.options=h}q.options.position=p;j=new Z.classes.Marker(q.options);g.push(j);q.data=n[m].data;q.tag=n[m].tag;d.add("marker",j,q);this._manageEnd(j,q,true)}}q.options=h;this._callback(g,o);this._end()}};this._addclusteredmarkers=function(p){var m,n,q,h,l=this,j=J(p,"radius"),i=J(p,"maxZoom"),o=J(p,"markers"),g=J(p,"clusters");if(!b.getBounds()){google.maps.event.addListenerOnce(b,"bounds_changed",function(){l._addclusteredmarkers(p)});return}if(typeof(j)==="number"){m=new D();for(n=0;n<o.length;n++){q=Y(o[n]);m.add(q,o[n])}h=this._initClusters(p,m,j,i,g)}this._callback(h,p);this._end()};this._initClusters=function(h,m,i,g,j){var l=this;m.setRedraw(function(o){var n,p=m.clusters(b,i,g,o);if(p){n=m.freeDiff(p);l._displayClusters(h,m,p,n,j)}});m.events(google.maps.event.addListener(b,"zoom_changed",function(){m.redraw(true)}),google.maps.event.addListener(b,"bounds_changed",function(){m.redraw()}));m.redraw();return d.add("cluster",m,h)};this._displayClusters=function(t,h,u,i,s){var j,g,p,l,n,o,v,B,x,z,q,A,w,r=L(t,"cluster")?O("",J(t,"cluster")):{},m=L(t,"marker")?O("",J(t,"marker")):{};for(g=0;g<u.length;g++){if(g in i){continue}B=u[g];n=false;if(B.idx.length>1){l=0;for(j in s){if((j>l)&&(j<=B.idx.length)){l=j}}if(s[l]){q=J(s[l],"width");A=J(s[l],"height");w={};ab.extend(true,w,r,{options:{pane:"overlayLayer",content:s[l].content.replace("CLUSTER_COUNT",B.idx.length),offset:{x:-q/2,y:-A/2}}});o=this._addOverlay(w,Y(B),true);w.options.pane="floatShadow";w.options.content=ab("<div></div>");w.options.content.width(q);w.options.content.height(A);v=this._addOverlay(w,Y(B),true);r.data={latLng:Y(B),markers:[]};for(p=0;p<B.idx.length;p++){r.data.markers.push(h.get(B.idx[p]).marker)}this._attachEvents(v,r);h.store(B,o,v);n=true}}if(!n){x={};ab.extend(true,x,m.options);for(p=0;p<B.idx.length;p++){l=h.get(B.idx[p]);m.latLng=l.latLng;m.data=l.marker.data;m.tag=l.marker.tag;if(l.marker.options){z={};ab.extend(true,z,x,l.marker.options);m.options=z}else{m.options=x}o=this._addMarker(m,m.latLng,true);this._attachEvents(o,m);h.store(B,o)}m.options=x}}};this.addinfowindow=function(g){this._resolveLatLng(g,"_addInfoWindow")};this._addInfoWindow=function(i,g){var j,l,h=[];this._subcall(i,g);j=O("infowindow",i,["open","anchor"]);if(g){j.options.position=g}l=new Z.classes.InfoWindow(j.options);if((j.open===undefined)||j.open){j.apply=X(j.apply);h.push(b);if(j.anchor){h.push(j.anchor)}j.apply.unshift({action:"open",args:h})}d.add("infowindow",l,j);this._manageEnd(l,j)};this.addpolyline=function(g){this._addPoly(g,"Polyline","path")};this.addpolygon=function(g){this._addPoly(g,"Polygon","paths")};this._addPoly=function(i,n,l){var h,m,g,j=O(n.toLowerCase(),i,l);if(j[l]){j.options[l]=[];for(h=0;h<j[l].length;h++){if(g=Y(j[l][h])){j.options[l].push(g)}}}m=new google.maps[n](j.options);m.setMap(b);d.add(n.toLowerCase(),m,j);this._manageEnd(m,j)};this.addcircle=function(g){this._resolveLatLng(g,"_addCircle")};this._addCircle=function(i,h){var j,g=O("circle",i);if(!h){h=Y(g.options.center)}if(!h){return this._manageEnd(false,g)}this._subcall(i,h);g.options.center=h;g.options.map=b;j=new Z.classes.Circle(g.options);d.add("circle",j,g);this._manageEnd(j,g)};this.addrectangle=function(g){this._resolveLatLng(g,"_addRectangle")};this._addRectangle=function(i,g){var h,j=O("rectangle",i);j.options.bounds=U(j.options.bounds,true);if(!j.options.bounds){return this._manageEnd(false,j)}this._subcall(i,j.options.bounds.getCenter());j.options.map=b;h=new Z.classes.Rectangle(j.options);d.add("rectangle",h,j);this._manageEnd(h,j)};this.addoverlay=function(g){this._resolveLatLng(g,"_addOverlay")};this._addOverlay=function(l,n,j){var m,o=O("overlay",l),p=ab.extend({pane:"floatPane",content:"",offset:{x:0,y:0}},o.options),g=ab("<div></div>"),h=[];g.css("border","none").css("borderWidth","0px").css("position","absolute");g.append(p.content);function i(){Z.classes.OverlayView.call(this);this.setMap(b)}i.prototype=new Z.classes.OverlayView();i.prototype.onAdd=function(){var q=this.getPanes();if(p.pane in q){ab(q[p.pane]).append(g)}};i.prototype.draw=function(){var s=this.getProjection(),q=s.fromLatLngToDivPixel(n),r=this;g.css("left",(q.x+p.offset.x)+"px").css("top",(q.y+p.offset.y)+"px");ab.each(("dblclick click mouseover mousemove mouseout mouseup mousedown").split(" "),function(t,u){h.push(google.maps.event.addDomListener(g[0],u,function(v){google.maps.event.trigger(r,u)}))});h.push(google.maps.event.addDomListener(g[0],"contextmenu",function(t){google.maps.event.trigger(r,"rightclick")}))};i.prototype.onRemove=function(){for(var q=0;q<h.length;q++){google.maps.event.removeListener(h[q])}g.remove()};i.prototype.hide=function(){g.hide()};i.prototype.show=function(){g.show()};i.prototype.toggle=function(){if(g){if(g.is(":visible")){this.show()}else{this.hide()}}};i.prototype.toggleDOM=function(){if(this.getMap()){this.setMap(null)}else{this.setMap(b)}};i.prototype.getDOMElement=function(){return g[0]};m=new i();if(!j){d.add("overlay",m,o);this._manageEnd(m,o)}return m};this.addfixpanel=function(h){var j=O("fixpanel",h),i=y=0,l,g;if(j.options.content){l=ab(j.options.content);if(j.options.left!==undefined){i=j.options.left}else{if(j.options.right!==undefined){i=a.width()-l.width()-j.options.right}else{if(j.options.center){i=(a.width()-l.width())/2}}}if(j.options.top!==undefined){y=j.options.top}else{if(j.options.bottom!==undefined){y=a.height()-l.height()-j.options.bottom}else{if(j.options.middle){y=(a.height()-l.height())/2}}}g=ab("<div></div>").css("position","absolute").css("top",y+"px").css("left",i+"px").css("z-index","1000").append(l);a.first().prepend(g);this._attachEvents(b,j);d.add("fixpanel",g,j);this._callback(g,j)}this._end()};this.adddirectionsrenderer=function(i,h){var g,j=O("directionrenderer",i,"panelId");j.options.map=b;g=new google.maps.DirectionsRenderer(j.options);if(j.panelId){g.setPanel(document.getElementById(j.panelId))}d.add("directionrenderer",g,j);this._manageEnd(g,j,h);return g};this.setdirectionspanel=function(i){var h=d.get("directionrenderer"),g=O("directionpanel",i,"id");if(h&&g.id){h.setPanel(document.getElementById(g.id))}this._manageEnd(h,g)};this.setdirections=function(i){var h=d.get("directionrenderer"),g=O("directions",i);if(i){g.options.directions=i.directions?i.directions:(i.options&&i.options.directions?i.options.directions:null)}if(g.options.directions){if(!h){h=this.adddirectionsrenderer(g,true)}else{h.setDirections(g.options.directions)}}this._manageEnd(h,g)};this.setstreetview=function(i){var h,g=O("streetview",i,"id");if(g.options.position){g.options.position=Y(g.options.position)}h=new Z.classes.StreetViewPanorama(document.getElementById(g.id),g.options);if(h){b.setStreetView(h)}this._manageEnd(h,g)};this.addkmllayer=function(h){var i,g=O("kmllayer",h,"url");g.options.map=b;if(typeof(g.url)==="string"){i=new Z.classes.KmlLayer(g.url,g.options)}d.add("kmllayer",i,g);this._manageEnd(i,g)};this.addtrafficlayer=function(i){var g=O("trafficlayer",i),h=d.get("trafficlayer");if(!h){h=new Z.classes.TrafficLayer();h.setMap(b);d.add("trafficlayer",h,g)}this._manageEnd(h,g)};this.addbicyclinglayer=function(i){var h=O("bicyclinglayer",i),g=d.get("bicyclinglayer");if(!g){g=new Z.classes.BicyclingLayer();g.setMap(b);d.add("bicyclinglayer",g,h)}this._manageEnd(g,h)};this.addgroundoverlay=function(i){var h,g=O("groundoverlay",i,["bounds","url"]);g.bounds=U(g.bounds);if(g.bounds&&(typeof(g.url)==="string")){h=new Z.classes.GroundOverlay(g.url,g.bounds);h.setMap(b);d.add("groundoverlay",h,g)}this._manageEnd(h,g)};this.geolatlng=function(h){var g=J(h,"callback");if(typeof(g)==="function"){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(i){var j=new google.maps.LatLng(i.coords.latitude,i.coords.longitude);g.apply(a,[j])},function(){var i=false;g.apply(a,[i])})}else{if(google.gears){google.gears.factory.create("beta.geolocation").getCurrentPosition(function(i){var j=new google.maps.LatLng(i.latitude,i.longitude);g.apply(a,[j])},function(){out=false;g.apply(a,[out])})}else{g.apply(a,[false])}}}this._end()};this.addstyledmap=function(i,h){var g=O("styledmap",i,["id","style"]);if(g.style&&g.id&&!c[g.id]){c[g.id]=new Z.classes.StyledMapType(g.style,g.options);if(b){b.mapTypes.set(g.id,c[g.id])}}this._manageEnd(c[g.id],g,h)};this.setstyledmap=function(h){var g=O("styledmap",h,["id","style"]);if(g.id){this.addstyledmap(g,true);if(c[g.id]){b.setMapTypeId(g.id);this._callback(c[g.id],h)}}this._manageEnd(c[g.id],g)};this.clear=function(h){var l=X(J(h,"list")||J(h,"name")),g=J(h,"last",false),j=J(h,"first",false),i=J(h,"tag");if(i!==undefined){i=X(i)}d.clear(l,g,j,i);this._end()};this.get=function(h){var g=J(h,"name")||"map",j=J(h,"first"),l=J(h,"all"),i=J(h,"tag");g=g.toLowerCase();if(g==="map"){return b}if(i!==undefined){i=X(i)}if(j){return d.get(g,false,i)}else{if(l){return d.all(g,i)}else{return d.get(g,true,i)}}};this.getmaxzoom=function(g){this._resolveLatLng(g,"_getMaxZoom")};this._getMaxZoom=function(i,g){var j=J(i,"callback"),h=this;if(j&&typeof(j)==="function"){E().getMaxZoomAtLatLng(g,function(m){var l=m.status===google.maps.MaxZoomStatus.OK?m.zoom:false;j.apply(a,[l,m.status]);h._end()})}else{this._end()}};this.setdefault=function(g){M(g);this._end()};this.autofit=function(p,l){var h,i,n,m,o,j=true,q=new google.maps.LatLngBounds(),g=J(p,"maxZoom",null);h=d.names();for(m=0;m<h.length;m++){i=d.all(h[m]);for(o=0;o<i.length;o++){n=i[o];if(n.getPosition){q.extend(n.getPosition());j=false}else{if(n.getBounds){q.extend(n.getBounds().getNorthEast());q.extend(n.getBounds().getSouthWest());j=false}else{if(n.getPaths){n.getPaths().forEach(function(r){r.forEach(function(s){q.extend(s);j=false})})}else{if(n.getPath){n.getPath().forEach(function(r){q.extend(r);j=false})}else{if(n.getCenter){q.extend(n.getCenter());j=false}}}}}}}if(!j&&(!b.getBounds()||!b.getBounds().equals(q))){if(g!==null){google.maps.event.addListenerOnce(b,"bounds_changed",function(){if(this.getZoom()>g){this.setZoom(g)}})}b.fitBounds(q)}if(!l){this._manageEnd(j?false:q,p,l)}}}ab.fn.gmap3=function(){var c,e,a=[],b=true,d=[];for(c=0;c<arguments.length;c++){e=arguments[c]||{};if(typeof(e)==="string"){e={action:e}}a.push(e)}if(!a.length){a.push({})}ab.each(this,function(){var g=ab(this),f=g.data("gmap3");b=false;if(!f){f=new F(g);g.data("gmap3",f)}if((a.length==1)&&(R(a[0]))){d.push(f._direct(a[0]))}else{f._plan(a)}});if(d.length){if(d.length===1){return d[0]}else{return d}}if(b&&(arguments.length==2)&&(typeof(arguments[0])==="string")&&(arguments[0].toLowerCase()==="setdefault")){M(arguments[1])}return this}}(jQuery));